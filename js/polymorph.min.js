!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r=r||self).polymorph={})}(this,function(r){"use strict"
var _=void 0,g=" ",c="fill",S="V",b="H",q="L",M="Z",j="M",C="C",T="S",E="Q",H="T",U="A"
var t=Math,$=t.abs,u=t.min,s=t.max,o=t.floor,p=t.round,F=t.sqrt,n=t.pow,I=t.cos,L=t.asin,N=t.sin,O=t.tan,Q=t.PI,V=2/3,f=n(2,-52)
function Z(){throw new Error(Array.prototype.join.call(arguments,g))}var e="undefined"!=typeof window&&window.navigator.userAgent,i=/(MSIE |Trident\/|Edge\/)/i.test(e)?Array:Float32Array
function h(r){return new i(r)}function d(r,t,n){var e=function(r){for(var t=r[0],n=r[1],e=n,i=t,a=2;a<r.length;a+=6){var o=r[a+4],f=r[a+5]
t=u(t,o),i=s(i,o),n=u(n,f),e=s(e,f)}return{x:t,w:i-t,y:n,h:e-n}}(n)
return{x:e.x+e.w*r,y:e.y+e.h*t}}function l(r,t,n,e){return F((r-n)*(r-n)+(t-e)*(t-e))}function v(r,t,n,e){var i=e.length
if(e[i-2]===e[0]&&e[i-1]===e[1]){if(!r){var a=d(t,n,e)
t=a.x,n=a.y}var o,f,u=e.slice(2)
i=u.length
for(var c=0;c<i;c+=6){var s=l(t,t,u[c],u[c+1])
f!==_&&f<=s||(f=s,o=c)}!function(r,t){var n,e=r.length,i=e-t,a=h(t)
for(n=0;n<t;n++)a[n]=r[n]
for(n=t;n<e;n++)r[n-t]=r[n]
for(n=0;n<t;n++)r[i+n]=a[n]}(u,o),e[0]=u[i-2],e[1]=u[i-1]
for(c=0;c<u.length;c++)e[c+2]=u[c]}}function y(r,t){var n=t-r.length,e=Math.ceil(t/r.length),i=h(t)
i[0]=r[0],i[1]=r[1]
for(var a=1,o=1;o<t-1;){i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a],i[++o]=r[++a]
var f=i[++o]=r[++a],u=i[++o]=r[++a]
if(n)for(var c=0;c<e&&n;c++)i[o+5]=i[o+3]=i[o+1]=f,i[o+6]=i[o+4]=i[o+2]=u,o+=6,n-=6}return i}function m(r){return r.map(function(r){return{points:r,perimeter:function(r){for(var t=r.length,n=r[t-2],e=r[t-1],i=0,a=0;a<t;a+=6)i+=l(r[a],r[a+1],n,e),n=r[a],e=r[a+1]
return o(i)}(r)}}).sort(function(r,t){return t.perimeter-r.perimeter}).map(function(r){return r.points})}function x(r,t,n){n.optimize===c&&(r=m(r),t=m(t)),r.length!==t.length&&(n.optimize===c?function r(t,n,e){var i=t.length,a=n.length
if(i<a)return r(n,t,e)
n.length=i
for(var o=a;o<i;o++){var f=t[o],u=e.x,c=e.y
if(!e.absolute){var s=d(u,c,f)
u=s.x,c=s.y}for(var l=h(f.length),v=0;v<f.length;v+=2)l[v]=u,l[v+1]=c
n[o]=l}}(r,t,n.origin):Z("optimize:none requires equal lengths"))
var e=Array(2)
if(e[0]=r,e[1]=t,n.optimize===c){for(var i=n.origin,a=i.x,o=i.y,f=i.absolute,u=0;u<r.length;u++)v(f,a,o,e[0][u]),v(f,a,o,e[1][u])
!function(r,t){for(var n=r[0].length,e=0;e<n;e++){var i=r[0][e],a=r[1][e],o=s(i.length+t,a.length+t)
r[0][e]=y(i,o),r[1][e]=y(a,o)}}(e,6*n.addPoints)}return e}var w={addPoints:0,optimize:c,origin:{x:0,y:0},precision:0}
function a(r,t){t=function(r,t){for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])
return r}(t,w),r&&2<=r.length||Z("invalid arguments")
for(var e=r.length-1,i=Array(e),n=0;n<e;n++)i[n]=A(r[n],r[n+1],t)
var a=t.precision?function(r){return r.toFixed(t.precision)}:_
return function(r){var t=e*r,n=u(o(t),e-1)
return function(r,t){if(void 0===t&&(t=p),function(r){return"string"==typeof r}(r))return r
for(var n=[],e=0;e<r.length;e++){var i=r[e]
n.push(j,t(i[0]),t(i[1]),C)
for(var a=void 0,o=2;o<i.length;o+=6){var f=t(i[o]),u=t(i[o+1]),c=t(i[o+2]),s=t(i[o+3]),l=t(i[o+4]),v=t(i[o+5])
f==l&&c==l&&u==v&&s==v&&a==(a=""+f+u+c+s+l+v)||n.push(f,u,c,s,l,v)}}return n.join(g)}(i[n]((t-n)/(n+1)),a)}}function A(e,i,r){var a=x(e.getData(),i.getData(),r),o=a[0].length
return function(r){if($(r-0)<f)return e.getStringData()
if($(r-1)<f)return i.getStringData()
for(var t=Array(o),n=0;n<o;n++)t[n]=D(a[0][n],a[1][n],r)
return t}}function D(r,t,n){for(var e=r.length,i=h(e),a=0;a<e;a++)i[a]=r[a]+(t[a]-r[a])*n
return i}function z(r,t){return r===_?t:r}var k=120*Q/180,B=2*Q
function G(r,t,n,e,i,a,o,f,u,c,s,l,v){if(n<=0||e<=0)return[r,t,f,u,f,u]
var g,p=Q/180*(+i||0),h=I(p),d=N(p),y=!!c
if(!y){var m=r,x=f,w=((r=m*h-t*-d)-(f=x*h-u*-d))/2,A=((t=m*-d+t*h)-(u=x*-d+u*h))/2,D=w*w/(n*n)+A*A/(e*e)
1<D&&(n*=D=F(D),e*=D)
var z=(a===o?-1:1)*F($((n*n*e*e-n*n*A*A-e*e*w*w)/(n*n*A*A+e*e*w*w)))
l=z*n*A/e+(r+f)/2,c=L((t-(v=z*-e*w/n+(t+u)/2))/e),s=L((u-v)/e),r<l&&(c=Q-c),f<l&&(s=Q-s),c<0&&(c+=B),s<0&&(s+=B),o&&s<c&&(c-=B),!o&&c<s&&(s-=B)}if($(s-c)>k){var P=s,S=f,b=u
g=G(f=l+n*I(s=c+k*(o&&c<s?1:-1)),u=v+e*N(s),n,e,i,0,o,S,b,s,P,l,v)}else g=[]
var q=4/3*O((s-c)/4)
if(g.splice(0,0,2*r-(r+q*n*N(c)),2*t-(t-q*e*I(c)),f+q*n*N(s),u-q*e*I(s),f,u),!y)for(var M=0,j=g.length;M<j;M+=2){var C=g[M],T=g[M+1]
g[M]=C*h-T*d,g[M+1]=C*d+T*h}return g}var J={M:2,H:1,V:1,L:2,Z:0,C:6,S:4,Q:4,T:2,A:7}
function K(r,t,n,e,i,a,o){var f=r.x,u=r.y
r.x=z(a,f),r.y=z(o,u),r.current.push(z(t,f),n=z(n,u),e=z(e,f),i=z(i,u),r.x,r.y),r.lc=r.c}function R(r){var t=r.c,n=r.t,e=r.x,i=r.y
if(t===S)n[0]+=i
else if(t===b)n[0]+=e
else if(t===U)n[5]+=e,n[6]+=i
else for(var a=0;a<n.length;a+=2)n[a]+=e,n[a+1]+=i}function W(r){return r.split(g).map(P)}function P(r,t){return 0===t?r:+r}function X(r){for(var t={x:0,y:0,segments:[]},n=function(r){return r.replace(/[\^\s]*([mhvlzcsqta]|\-?\d*\.?\d+)[,\$\s]*/gi," $1").replace(/([mhvlzcsqta])/gi," $1").trim().split("  ").map(W)}(r),e=0;e<n.length;e++){var i=n[e],a=i[0],o=a.toUpperCase(),f=o!==M&&o!==a
t.c=o
var u=J[o],c=i,s=1
do{t.t=1===c.length?c:c.slice(s,s+u),f&&R(t)
var l=t.t,v=t.x,g=t.y,p=void 0,h=void 0,d=void 0,y=void 0,m=void 0,x=void 0
if(o===j)t.segments.push(t.current=[t.x=l[0],t.y=l[1]])
else if(o===b)K(t,_,_,_,_,l[0],_)
else if(o===S)K(t,_,_,_,_,_,l[0])
else if(o===q)K(t,_,_,_,_,l[0],l[1])
else if(o===M)K(t,_,_,_,_,t.current[0],t.current[1])
else if(o===C)K(t,l[0],l[1],l[2],l[3],l[4],l[5]),t.cx=l[2],t.cy=l[3]
else if(o===T){var w=t.lc!==T&&t.lc!==C
K(t,p=w?_:2*v-t.cx,h=w?_:2*g-t.cy,l[0],l[1],l[2],l[3]),t.cx=l[0],t.cy=l[1]}else if(o===E){var A=l[0],D=l[1]
d=l[2],y=l[3],K(t,v+(A-v)*V,g+(D-g)*V,d+(A-d)*V,y+(D-y)*V,d,y),t.cx=A,t.cy=D}else if(o===H)d=l[0],y=l[1],t.lc===E||t.lc===H?(p=v+(2*v-t.cx-v)*V,h=g+(2*g-t.cy-g)*V,m=d+(2*v-t.cx-d)*V,x=y+(2*g-t.cy-y)*V):(p=m=v,h=x=g),K(t,p,h,m,x,d,y),t.cx=m,t.cy=x
else if(o===U)for(var z=G(v,g,l[0],l[1],l[2],l[3],l[4],l[5],l[6]),P=0;P<z.length;P+=6)K(t,z[P],z[P+1],z[P+2],z[P+3],z[P+4],z[P+5])
else Z(t.c," is not supported")
s+=u}while(s<c.length)}return t.segments}var Y=/^([#|\.]|path)/i
var rr=(tr.prototype.getData=function(){return this.data},tr.prototype.getStringData=function(){return this.stringData||(this.stringData=this.render())},tr.prototype.render=function(r){void 0===r&&(r=p)
for(var t=this.data,n=[],e=0;e<t.length;e++){var i=t[e]
n.push(j,r(i[0]),r(i[1]),C)
for(var a=void 0,o=2;o<i.length;o+=6){var f=r(i[o]),u=r(i[o+1]),c=r(i[o+2]),s=r(i[o+3]),l=r(i[o+4]),v=r(i[o+5])
f==l&&c==l&&u==v&&s==v&&a==(a=""+f+u+c+s+l+v)||n.push(f,u,c,s,l,v)}}return n.join(g)},tr)
function tr(r){var t=function(r){if(Array.isArray(r))return{data:r,stringData:_}
var t
if("string"==typeof r&&Y.test(r)?r=document.querySelector(r):t=r,"string"==typeof r)return{data:X(r),stringData:t}
var n=r
return"PATH"===n.tagName.toUpperCase()?{data:X(t=n.getAttribute("d")),stringData:t}:Z("Unsupported element ",n.tagName)}(r),n=t.data,e=t.stringData
this.data=n,this.stringData=e}r.Path=rr,r.interpolate=function(r,t){return a(r.map(function(r){return new rr(r)}),t||{})},Object.defineProperty(r,"__esModule",{value:!0})})
